# Архитектура веб приложений

## Что такое веб приложение?

В рамках этой статьи, веб приложение - это любое клиент-серверная приложение или 
отдельный сервис, написанный на языке Java, который взаимодействует с 
любой реализацией клиента по сети. (SPA, другое WEB приложение, браузер 
и отрисовка на стороне сервера, тонкий/толстый клиент, в рамках статьи не важно) 
Логика веб-приложения распределена между сервером и клиентом, 
обмен информацией происходит по сети.

## Что такое клиент-серверная архитектура?

Клиент—серверная архитектура - это вычислительная или сетевая архитектура, 
в которой задания или сетевая нагрузка распределены между поставщиками услуг, 
называемыми серверами, и заказчиками услуг, называемыми клиентами.

## Как выглядит типичная клиент-серверная архитектура?

- client -> server -> database

## Что такое двухзвенная, трехзвенная архитектура и n-звенная архитектура?

- client (1 звено) -> server (2 звено) -> database store
- client (1 звено) -> server (2 звено) -> database server (3 звено) -> database store
- client (1 звено) -> server (2 звено) -> server (3 звено) -> ... -> database server (n звено) -> database store

## Зачем нужна архитектура веб приложений?

- Расширяемость
- Унификация реализации
- Контроль
- Более долгий цикл существования

## Как выглядит типичная архитектура веб приложений на практике?

request -> balancer -> web app instances -> balancer -> database instances

## Как выглядит типичная прикладная архитектура WEB приложений?

- request -> controller -> dto -> service -> model -> repository -> database
- request -> controller -> dto -> service -> service -> service -> model -> repository -> database

## Что такое надежность?

Надежность – это свойство оборудования (системы) сохранять значения установленных параметров функционирования 
в определенных пределах, соответствующих заданным режимам. Надежность – комплексный параметр, который в зависимости от 
назначения системы и условий ее эксплуатации может включать в себя безотказность, долговечность, 
ремонтопригодность и доступность как в отдельности, так и в разных сочетаниях. 
Работоспособность – это состояние системы, при котором она соответствует всем требованиям, 
предъявляемым к ее основным параметрам. Показатели могут со временем меняться. Изменение, выходящее за допустимые 
границы, приводит к возникновению отказа. Долгое время надежность не измерялась количественно, что сильно затрудняло 
ее объективную оценку. Для оценки использовались качественные определения – «высокая», «низкая» и др. 
Установление количественных показателей и способов их измерения и расчета положило начало научным методам 
в исследовании надежности.

Количественные показатели надежности определяются путем расчетов, проведением испытаний, 
статистической обработкой данных эксплуатации и математическим моделированием. 
Расчеты надежности производятся главным образом на этапе проектирования с целью прогнозирования 
ожидаемой надежности данной системы. Это позволяет выбрать наиболее подходящий вариант технического 
решения и методы обеспечения надежности, выявить слабые места, обоснованно назначить рабочие режимы, 
форму и порядок обслуживания системы.

## Что такое SLA?

SLA или Service Level Agreement согласно ITIL (IT InfrastructureLibrary) SLA — это мини-договор, 
устанавливающий параметры качества предоставляемых бизнесу ИТ-услуг.В SLA описываются условия 
предоставления услуг (сервисов), устанавливается перечень таких услуг, а также правила, по которым заказчик будет 
пользоваться этими сервисами. В то же время SLA — один из основных механизмов, позволяющих управлять качеством 
ИТ-услуг и управлять ожиданиями пользователей.

## Что такое отказоустойчивость?

Способность системы продолжать функционировать при отказе одного или нескольких из ее компонентов

## Что такое доступность?

Доступность - это отношением общего времени, когда оборудование находится в работоспособном состоянии, 
к общему времени эксплуатации.

## Что такое 99.99, 99.999, 99.9999?

Техническая метрика доступности системы, например 99.99 означает лишь 52 минуты простоя системы в год.
365 * 24 * 60 / 100 * 0.01 = 52.56

## Чем отличается архитектура отказоустойчивых систем от обычных?

- Дороже
- Дольше
- Больше инстансов компонентов
- Есть Hot-Standby
- Много репликаций
- Надо думать заранее
- Иногда бессмысленно 

## Что такое сервлет?

Сервлет - это спецификация.
Сервлет является интерфейсом Java, реализация которого расширяет функциональные возможности сервера. 
Сервлет взаимодействует с клиентами посредством принципа запрос-ответ.
Хотя сервлеты могут обслуживать любые запросы, они обычно используются для расширения веб-серверов. 
Для таких приложений технология Java Servlet определяет HTTP-специфичные сервлет классы. 
Пакеты javax.servlet и javax.servlet.http обеспечивают интерфейсы и классы для создания сервлетов.

## Что такое контейнер сервлетов?

Контейнер сервлетов  — программа, представляющая собой сервер, который занимается системной поддержкой 
сервлетов и обеспечивает их жизненный цикл в соответствии с правилами, определёнными в спецификациях.
Контейнер сервлетов - это веб-сервер, который должен иметь возможность запускать Java Servlets.

## Что такое контейнер сервлетов, веб сервер и сервер приложений?

Контейнер сервлетов - это веб-сервер, который должен иметь возможность запускать Java Servlets.
Веб сервер необходим для обработки HTTP request от браузера клиента и ответа клиенту с помощью HTTP response. 
Веб сервер понимает язык HTTP и запускается по HTTP протоколу. 
Примером веб сервера может служить реализация от Apache – Tomcat.
Сервер приложений предоставляет дополнительные возможности, такие как поддержка JavaBeans, JMS Messaging, 
Transaction Management и др. Можно сказать, что сервер приложений – это веб сервер с дополнительными возможностями, 
которые помогают разрабатывать корпоративные приложения.

## Что такое балансировщик?

Балансировщик нагрузки - это метод распределения заданий/трафика между несколькими сетевыми устройствами 
(например, серверами) с целью оптимизации использования ресурсов, сокращения времени обслуживания запросов, 
горизонтального масштабирования кластера (динамическое добавление/удаление устройств), а также обеспечения 
отказоустойчивости (резервирования).

## Что такое nginx?

NginX — это HTTP-сервер и обратный прокси-сервер, почтовый прокси-сервер, 
а также TCP/UDP прокси-сервер общего назначения, изначально написанный Игорем Сысоевым. 
Уже длительное время он обслуживает серверы многих высоконагруженных российских сайтов, 
таких как Яндекс, Mail.Ru, ВКонтакте и Рамблер. Согласно статистике Netcraft nginx обслуживал или 
проксировал 25.76% самых нагруженных сайтов в сентябре 2020 года. 
Вот некоторые примеры успешного внедрения nginx (тексты на английском языке): Dropbox, Netflix, 
Wordpress.com, FastMail.FM.

## Что такое HAProxy?

HAProxy – серверное программное обеспечение для обеспечения высокой доступности и балансировки нагрузки для TCP и 
HTTP приложений, методом распределения входящих запросов на несколько серверов. HAProxy используется на многих 
популярных ресурсах, включая Twitter, Instagram, Github, Avito, Amazon и другие.

## HAProxy vs NginX?

- для http одинаково
- для https по бенчмаркам haproxy
- если нужен полноценный сервер раздачи статики nginx

## Что такое файрвол?

Межсетевой экран, сетевой экран — программный или программно-аппаратный элемент компьютерной сети, 
осуществляющий контроль и фильтрацию проходящего через него сетевого трафика в соответствии с заданными правилами.

## Что такое брокеры сообщений?

Брокеры сообщений - это программные/инфраструктурные компоненты в системе, который обеспечивает промежуточную обработку 
и хранение сообщений от поставщика до вычитки потребителем

Apache Kafka — распределенный горизонтально масштабируемый отказоустойчивый программный брокер сообщений.

## Что такое шина или ESB?

ESB - это связующее программное обеспечение, обеспечивающее централизованный и унифицированный 
событийно-ориентированный обмен сообщениями между различными информационными системами 
на принципах сервис-ориентированной архитектуры. 

## Что такое микросервисы?

Архитектурный подход

## Что такое монолиты?

Архитектурный подход

## Что такое SOA?

Архитектурный подход

## Что такое шардирование?

Шардирование (горизонтальное партиционирование) — это принцип проектирования базы данных, при котором логически 
независимые строки таблицы базы данных хранятся раздельно, заранее сгруппированные в секции, которые, 
в свою очередь, размещаются на разных, физически и логически независимых серверах базы данных, 
при этом один физический узел кластера может содержать несколько серверов баз данных. 
Наиболее типовым методом горизонтального партицирования является применение хеш функции от идентификационных 
данных клиента, которая позволяет однозначно привязать заданного клиента и все его данные к отдельному 
и заранее известному экземпляру баз данных («шарду»), тем самым обеспечив практически неограниченную от 
количества клиентов горизонтальную масштабируемость.

## Что такое репликация?

Репликация - это механизм синхронизации содержимого нескольких копий объекта (например, содержимого базы данных). 

## Что такое партицирование?

Партицирование - это разбиение больших таблиц на логические части по выбранным критериям. 
Партиционированные или секционированные таблицы призваны улучшить производительность и управляемость базами данных.

## Что такое распределенные системы?

Распределенная система - это компьютерная система, которая работает сразу на множестве машин, образующих цельный кластер.  
Кластер это набор компьютеров/серверов, объединенных сетью и взаимодействующих между собой. 
С помощью распределенных систем решаются архитектурные проблемы связанные с высокодоступностью и отказоустойчивостью.

## Что такое асинхронные веб приложения?

- WebFlux
- Akka
- JavaRx
- Python flask

## Чем хороши микросервисы?

- Независимые релизы
- Компонентное тестирование
- Независимая деградация
- Независимое масштабирование
- Возможность пробовать новые технологии
- У сервисов есть команды владельцев
- Экономия на ресурсах в случае контейнеризации

## Чем плохи микросервисы?

- Более сложный DevOps
- Распределенные логи и трейсинг запросов
- Мониторинг сложнее
- Отказы сервисов
- Ретраи запросов
- Дубли данных
- Увеличение latency
- Circuit breaking
- Распределенные транзакции
